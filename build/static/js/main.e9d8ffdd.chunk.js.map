{"version":3,"sources":["components/AddPersonForm.js","components/FilterNamesForm.js","components/PersonsList.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["AddPersonForm","submitHandler","nameHandler","numberHandler","name","number","onSubmit","htmlFor","type","id","value","onChange","FilterNamesForm","filterHandler","filterValue","e","preventDefault","PersonsList","persons","deleteHandler","map","key","onClick","Notification","message","isError","className","baseUrl","axios","get","then","response","data","person","post","delete","put","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setFilterValue","notification","setNotification","hasError","setHasError","useEffect","personsService","personsToShow","filter","toLowerCase","includes","clearPersonInputs","triggerNotification","isErrorMsg","setTimeout","newPerson","hasSameName","some","window","confirm","find","returnedPerson","catch","concat","target","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e9d8ffdd.chunk.js","sourcesContent":["import React from \"react\";\n\nconst AddPersonForm = ({\n  submitHandler,\n  nameHandler,\n  numberHandler,\n  name,\n  number,\n}) => (\n  <form onSubmit={submitHandler}>\n    <div>\n      <label htmlFor=\"fullName\">Full name</label>\n      <br />\n      <input\n        type=\"text\"\n        id=\"fullName\"\n        name=\"fullName\"\n        value={name}\n        onChange={nameHandler}\n      />\n    </div>\n\n    <div>\n      <label htmlFor=\"number\">Phonenumber</label>\n      <br />\n      <input\n        type=\"text\"\n        id=\"number\"\n        name=\"number\"\n        value={number}\n        onChange={numberHandler}\n      />\n    </div>\n\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n);\n\nexport default AddPersonForm;\n","import React from \"react\";\n\nconst FilterNamesForm = ({ filterHandler, filterValue }) => (\n  <form onSubmit={(e) => e.preventDefault()}>\n    <label htmlFor=\"filter\">filter names</label>\n    <br />\n    <input\n      type=\"text\"\n      id=\"filter\"\n      name=\"filter\"\n      value={filterValue}\n      onChange={filterHandler}\n    />\n  </form>\n);\n\nexport default FilterNamesForm;\n","import React from \"react\";\n\nconst PersonsList = ({ persons, deleteHandler }) => {\n  return (\n    <ul>\n      {persons.map(({ name, number, id }) => (\n        <li key={`person-${id}`}>\n          {name} - {number || \"this person does not have phonenumber\"}{\" \"}\n          <button type=\"submit\" onClick={() => deleteHandler(id, name)}>\n            Delete me\n          </button>\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nexport default PersonsList;\n","import React from \"react\";\n\nconst Notification = ({ message, isError }) => {\n  if (!message) {\n    return null;\n  }\n\n  return <p className={`notification${isError ? \" error\" : \"\"}`}>{message}</p>;\n};\n\nexport default Notification;\n","import axios from \"axios\";\n\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst createPerson = (person) => {\n  const request = axios.post(baseUrl, person);\n  return request.then((response) => response.data);\n};\n\nconst deletePerson = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response.data);\n};\n\nconst updatePerson = (id, person) => {\n  const request = axios.put(`${baseUrl}/${id}`, person);\n  return request.then((response) => response.data);\n};\n\nexport default {\n  getAll,\n  createPerson,\n  deletePerson,\n  updatePerson,\n};\n","import React, { useState, useEffect } from \"react\";\n\nimport AddPersonForm from \"./components/AddPersonForm\";\nimport FilterNamesForm from \"./components/FilterNamesForm\";\nimport PersonsList from \"./components/PersonsList\";\nimport Notification from \"./components/Notification\";\nimport personsService from \"./services/persons\";\n\nconst NOTIFICATION_DEFAULT_DURATION_MS = 5000;\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filterValue, setFilterValue] = useState(\"\");\n  const [notification, setNotification] = useState();\n  const [hasError, setHasError] = useState(false);\n\n  useEffect(() => {\n    personsService.getAll().then((persons) => {\n      setPersons(persons);\n    });\n  }, []);\n\n  // if no value for filter field, show all persons\n  // otherwise filter relevant names from persons list\n  const personsToShow = filterValue\n    ? persons.filter(({ name }) =>\n        name.toLowerCase().includes(filterValue.toLowerCase())\n      )\n    : persons;\n\n  const clearPersonInputs = () => {\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n\n  const triggerNotification = (message, isErrorMsg = false) => {\n    setNotification(message);\n    setHasError(isErrorMsg);\n\n    setTimeout(() => {\n      setNotification(\"\");\n      setHasError(false);\n    }, NOTIFICATION_DEFAULT_DURATION_MS);\n  };\n\n  const addPerson = (e) => {\n    e.preventDefault();\n\n    if (!newName) {\n      triggerNotification(\"You have not entered a name\");\n      return;\n    }\n\n    const newPerson = { name: newName, number: newNumber };\n    const hasSameName = ({ name }) =>\n      name.toLowerCase() === newName.toLowerCase();\n    const nameExists = persons.some(hasSameName);\n\n    if (nameExists) {\n      if (window.confirm(`${newName} already exists, want to update number?`)) {\n        const { id } = persons.find(hasSameName);\n\n        personsService\n          .updatePerson(id, newPerson)\n          .then((returnedPerson) => {\n            setPersons(\n              persons.map((person) =>\n                person.id !== id ? person : returnedPerson\n              )\n            );\n            clearPersonInputs();\n            triggerNotification(\n              `Person ${returnedPerson.name} updated with new number!`\n            );\n          })\n          .catch(() => {\n            triggerNotification(\n              `Error, ${newName} has already been removed`,\n              true\n            );\n          });\n      }\n    } else {\n      personsService\n        .createPerson(newPerson)\n        .then((returnedPerson) => {\n          setPersons(persons.concat(returnedPerson));\n          triggerNotification(`Person ${returnedPerson.name} added!`);\n        })\n        .catch(() => {\n          triggerNotification(\n            `Something went wrong, could  not add ${newName}. Check your inputs!`,\n            true\n          );\n        });\n      clearPersonInputs();\n    }\n  };\n\n  const deleteUser = (id, name) => {\n    if (\n      window.confirm(`Are you sure sure you want to delete ${name} (${id})`)\n    ) {\n      personsService.deletePerson(id).then(() => {\n        setPersons(persons.filter((person) => person.id !== id));\n        triggerNotification(`Person ${name} deleted!`);\n      });\n    }\n  };\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value);\n  };\n\n  const handleFilterChange = (e) => {\n    setFilterValue(e.target.value);\n  };\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n\n      <Notification message={notification} isError={hasError} />\n\n      <h2>Add a new person</h2>\n      <AddPersonForm\n        submitHandler={addPerson}\n        nameHandler={handleNameChange}\n        numberHandler={handleNumberChange}\n        name={newName}\n        number={newNumber}\n      />\n\n      <h2>Numbers</h2>\n      <FilterNamesForm\n        filterHandler={handleFilterChange}\n        filterValue={filterValue}\n      />\n\n      <PersonsList persons={personsToShow} deleteHandler={deleteUser} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}